BIN=./bin
LOGS=./logs

all: init CPU

# implementation with CPU code
CPU: cpuimpl.cu naiveop trie opcfile logger
	nvcc -arch=sm_20 -g $(BIN)/logger.o $(BIN)/naiveOperations.o $(BIN)/trie.o $(BIN)/opcodeFile.o cpuimpl.cu -DNUM_FEATURES=300 -o $(BIN)/cpuimpl.o -lm

run:
	$(BIN)/cpuimpl.o ../data/opcodelist ../data/benign_2.csv ../data/malicia_2.csv

naiveop: naiveOperations.cu
	nvcc -g -c -arch=sm_20 naiveOperations.cu -o $(BIN)/naiveOperations.o -lm

trie: trie.cu
	nvcc -g -c -arch=sm_20 trie.cu -o $(BIN)/trie.o -lm

logger: logger.cu logger.h
	nvcc -g -c -arch=sm_20 logger.cu -o $(BIN)/logger.o

opcfile: opcodeFile.cu
	nvcc -g -c -arch=sm_20 opcodeFile.cu -o $(BIN)/opcodeFile.o -lm




init:
	mkdir -p $(BIN) $(LOGS)

clean:
	rm -rf $(BIN) $(LOGS)
